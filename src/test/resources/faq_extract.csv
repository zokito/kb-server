"id","NAME","SYSTEMMODSTAMP","ANSWER__C","KEYWORDS__C","PUBLIC__C","PUBLISHED__C","QUESTION__C","TITLE__C"
"a1m30000000UALAAA4","FAQ-0058","2012-04-23T20:27:07.000Z","This FAQ is designed to be a placeholder for common mistakes made when setting up the Click Approve package.  Please feel free to add to the list, but do not delete items.

1. Referencing the site URL in the 'Site Address' field of the custom settings.

This feature allows users to configure multiple sites and have them referenced by different users or users on a profile.  If the site URL is:

http://coltproto.cloudsense.cs13.force.com/clickapprove

the 'Site Address' should be:

http://coltproto.cloudsense.cs13.force.com/clickapprove/cscap__ClickApprove

/clickapprove/ can be replaced with whatever you have typed into the 'Default Web Address' field of your site.  In this way multiple sites can be created for different profiles and/or users by creating additional custom settings as requirements dictate.

The concept is as follows:

The domain name is the base.  Sites act like folders with pages placed into them.","Click Approve InMaintenance","false","false","What are common mistakes that are made when setting up Click Approve?","Setting up Click Approve correctly"
"a1m30000000TjegAAC","FAQ-0047","2011-11-07T10:07:11.000Z","Edit and save the action or predicate that is referencing the changes data. This will then be automatically regenerated into the rule description.","refresh rule description action predicate regenerate rule description","true","true","When I have changed things like the underlying values of constrained items list for a predicate (i.e. things that are reflected in a rule description), how can I get the rule description to be updated?","Regenerating Rule Descriptions"
"a1m30000000TcEMAA0","FAQ-0042","2011-08-18T12:24:09.000Z","Yes.

Embedding of custom screens into a product model UI is described in other FAQ. Creating popups is just another flavour of this.

If you set the value of a Text Display attribute to the following:

<iframe src=""http://www.google.co.uk"" id=""popupexample"" width=""400px"" height=""400px"" marginwidth=""0"" marginheight=""0"" hspace=""0"" vspace=""0"" frameborder=""1"" scrolling=""no"" style=""position: absolute; left: 600px; top: 200px;""></iframe>

... a popup window will be displayed in your respective product configuration screen.","widget iframe popup custom","true","true","Can I add custom popup screens that will appear based on rules or calculations during order capture?","Adding Popup Screens to A Product Model"
"a1m30000000TThcAAG","FAQ-0032","2011-04-28T05:51:39.000Z","Yes - click on the 'FAQ Search' tab in the Timesheets application and start typing a word or short phrase. You will see the results returned dynamically as you type.

Tip: keep terms simple as its currently using SOQL, not SOSL but it works pretty well for current volumes). For example:

- Good: lookup
- Bad: I want to see everything about lookups","search faq frequently asked question easy find faq help","true","true","Is there an easy way to search the FAQ without configuring list views?","Searching FAQ"
"a1m30000000TThXAAW","FAQ-0031","2011-04-28T05:43:36.000Z","The values stored by a Configurator checkbox are always 'Yes' and 'No' which correspond to checked and unchecked respectively. This is true even if you set the attribute datatype to 'Boolean'.

To fix the problem, replace attribute default values and rule operands such that where you were previously using True and False, you should now use Yes and No.","boolean checkbox true false yes no rule not firing not executing not executed action","true","true","When I use the value of a checkbox in a rule (e.g. {My Attr} = True) the rule does not work - the actions that I expect are not executed, why is this?","Using Values From A Checkbox"
"a1m30000000TTkNAAW","FAQ-0033","2011-04-28T17:10:36.000Z","The first thing to note is that to get and set attribute values you need to know the element id for the element that contains the attribute value. For an attribute that is in a 'top level' product, this is straightforward, the element id will be the Configurator name of the attribute with spaces replaced by an underscore and suffixed by underscore + 0 as in the following example:

- Configurator attribute: {My Attribute}
- Element Id: My_Attribute_0

For attributes that are inside related product configurations the element id is constructed from a path of the containing attribute names separated by colons. For example, consider the following element id:

- Site_0:IP_Address_Range_0:Starting_IP_Address_0

In this example there was a top level product that had an attribute called {Site} (which was a related product) which had an attribute called {IP Address Range} (which was a related product) which had an attribute called {Starting IP Address}.

Note that the '0' in these generated ids can be other numbers, depending upon how many (related product) attributes of the particular type exist in a parent product. In the example above, if there were 2 sites in the overall configuration there could also be an attribute with the corresponding element id:

- Site_1:IP_Address_Range_0:Starting_IP_Address_0

In more complex scenarios it is better to check the attribute element ids using view source or a debugging console of some description. This will help avoid typographical errors and mis-identification of elements.

Once you know the element id corresponding to your attribute(s), getting and setting their values is easy. To set the value of an attribute use:

- CS.setAttribute([attribute_element_id], [value])

For example:

- CS.setAttribute('Bandwidth_0', '5Mb')

To get the value of an attribute use:

- CS.getAttributeValue([attribute_element_id])

For example:

- CS.getAttributeValue('PortNumber')","javascript attribute value setattribute getattribute getattributevalue rule action script write read","true","true","When writing or Javascript rule action, how do I read and write values from and to the Configurator attributes?","Writing and Reading Configurator Attribute Data In Javascript"
"a1m30000000TmPZAA0","FAQ-0049","2011-11-29T15:08:06.000Z","Yes it can! 

Since multicurrency is not supported in configurator by default, things need to be tweaked a bit. Attached is a document that walks you through the steps that need to be done in order to set up configurator to work correctly in orgs with multicurrency.","Multicurrency, integrating Multicurrency with Configurator","false","false","Can CS Configurator be used in orgs that have multicurrency activated?","CS Configurator in Multicurrency Orgs"
"a1m30000000TUhYAAW","FAQ-0037","2011-05-11T17:44:20.000Z","Records of the following objects should be deleted:

cscfga__Product_Bundle__c, cscfga__Product_Basket__c, cscfga__Product_Configuration__c, cscfga__Attribute__c, cscfga__Attribute_Field__c

These are the instantiations of the Product Definitions, Attribute Definitions etc, and are produced each time a product is configured.  The cscfgc should be replaced with the Configurator package prefix from your org, found by clicking:

Setup > View Installed Packages > CloudSenseConfigurator

Deleting the records:

Use the following script, executed in the System Log, to delete <b> ALL </b> records of the above objects replacing the package prefix as appropriate:

N.B. Do not run this code if you need to keep any of this data for any reason 

List<cscfga__Product_Configuration__c> configs = [select id from cscfga__Product_Configuration__c where cscfga__parent_configuration__c = null];
delete configs;


List<cscfga__Product_Basket__c> baskets = [select id from cscfga__Product_Basket__c];
delete baskets;

List<cscfga__Product_Bundle__c> bundles = [select id from cscfga__Product_Bundle__c];
delete bundles;","product configurator data storage limit exceeded attribute configuration bundle basket attribute field","true","true","My data storage limit has been exceeded in my developer environment and it seems that the primary cause is configuration and attribute data.  Which records should be deleted and is there an easy way to delete the data that is produced when configuring products?","Configuration Data Cleardown"
"a1m30000000TUhsAAG","FAQ-0038","2011-05-11T17:42:19.000Z","Create an attribute of type 'calculation' and set the default value to:

{$Config.index}

You can thereafter refer to the value of this attribute in order to ascertain the index of the related product in context.","attribute related product index","true","true","How can I get the index number of a related product (i.e. where a parent product can have multiple related products of the same kind)?","Getting the Index of a Related Product"
"a1m30000000TUatAAG","FAQ-0036","2012-10-09T14:34:38.000Z","You can embed a widget into a Calculation Field or a Text Display field. The chief distinguishing characteristics are as follows:

Widget in Text Display
-----------------------------
- Will display in the text (i.e. label) column of the product config screen
- It will not align nicely to the standard attribute value fields
- It can be made to neatly fill up an entire section (by iframe sizing and making its containing attribute double-row)
- Better for displaying bigger widgets that are screens in their own right
- Not so good for displaying smaller widgets that are intended to function like enhanced controls (e.g. custom lookups and so on)
- Initial value setting and subsequent re-setting by rules is easier because the value of a Text Display is treated directly as a literal String e.g. you can enter <iframe src=""widget""></iframe> (note absence of containing double quotes)

Widgets in Calculation
-----------------------------
- Will display in the value column of the product config screen (i.e. same column that ordinary attribute fields are displayed)
- Will align nicely to the standard attribute fields
- Can be made bigger or smaller by iframe sizing but can't be made to fill an entire section or half-section
- Better for displaying smaller widgets that are intended to function like enhanced controls
- Not so good for displaying bigger widgets that are screens in their own right
- Cannot be set using rules
- Can be dynamic by concatenating the values of other attributes to form the markup.

See FAQ-0029 and FAQ-0035 for more details of using widgets.","which attribute types screen embed visualforce screenflow page apex custom screen configurator pros and cons","true","true","What attribute types can I embed a widget into and which should I use?","Options for Deploying Widgets to Configurator Screens"
"a1m30000000U1AeAAK","FAQ-0055","2012-03-12T14:22:24.000Z","To be able to attach a document to the Click Approve email that is not in the 'Notes and Attachments' related list, the document must be tagged with the Keywords 'sales order'.  You will be able to send any document that is not in a persons 'My Personal Documents' folder and is tagged as above.","click approve document folder attachment sales order","false","false","Can documents be attached to the Click Approve email that are not in the 'Notes and Attachments' related list?","attaching documents to the Click Approve email"
"a1m30000000TUX6AAO","FAQ-0035","2011-05-09T06:00:24.000Z","Yes.
Please refer to FQA-0029 (https://na1.salesforce.com/a1m30000000TQI1AAO) for an example of adding a Visualforce screen into a Product Configuration. This FAQ extends that to describe a technique to make it more dynamic. In this case, we will reload the widget when changes are made in the containing form.

One way to achieve this requirement is as follows:

- Instead of directly entering the widget markup into a TextDisplay field (as per the instructions in FAQ-0029), you create, in effect, a widget template, using multiple attributes as in the following example:

- Suppose you have a page to which an id of an object can be passed (e.g. a contact), you anticipate that the user may change the user may change the contact during product configuration, therefore the widget needs to be refreshed to account for that.

- Suppose the URL of your apex 'contact' page looks like this: http://na1.salesforce/apex/mycontact?id=ABC123456789XYZ

- Create an attribute e.g. {WidgetContainer}, type Text Display, with a default value if relevant. This will display your widget under the required circumstances according to your implementation - see below...

- Create an attribute e.g. {WidgetLeft}, type user input, default value: <iframe src=""http://na1.salesforce/apex/mycontact?id=. This is the left hand part of your widget template.

- Create an attribute, e.g. {ContactId}, type user input or calculation. This document assumes that you will populate this dynamically with a contact id according to the rest of you product logic. This will be the middle part of your widget template.

- Create an attribute, e.g. {WidgetRight} type user input, default value: "" width=""100%"" height=""1400"" frameborder=""0""></iframe>. This is the right hand part of your widget template.

- Create a rule that executes at the appropriate times (e.g. when {ContactId} changes). The rule should be configured to set the value of {WidgetContainer} to an expression that concatenates the various parts of your template, i.e (in this case): {WidgetLeft} & {ContactId} & {WidgetRight}

If you have configured everything correctly then your widget should respond to changes in your product model contact selection by reloading the relevant new url.","visualforce embed screen widget dynamic","true","true","Can I add custom dynamic components to a Product Configuration screen so that when I enter values in the main screen, the 'widget' can be dynamically updated?","Add Dynamic Widgets to a Product Configuration Screen"
"a1m30000000TUX1AAO","FAQ-0034","2011-09-21T13:21:37.000Z","Yes.

Note
====
The text area control does not like quotes and has substituted them in the Javascript provided below. Please see the attachment to this FAQ for the original Javascript.

Overview
=======
This FAQ builds on the technique described in FAQ-0029 which describes how to embed VisualForce pages into a Product Configuration screen. In this FAQ we explain how to pass data back from the embedded (widget) screen to the Product Configuration screen and automatically update attributes. This technique enables the use of sophisticated controls to set attribute values.

Challenge
========
Since the Product Configuration screen is part of the Configurator managed package, it is in a different domain than the out of the box (OOB) Salesforce screens and any custom VisualForce screens that we create. Due to the constraints imposed on cross-domain scripting we cannot, therefore, directly manipulate the DOM of the Product Configuration screen via Javascript in our widget.

Solution
======
We can use Javascript Window messaging to circumvent the problem described above. Having created your widget screen you can follow the instructions below to get it to communicate with the Product Configuration screen.

Add Messaging to the Widget
---------------------------------------
Add the following Javascript to your widget:

    &amp;amp;amp;amp;amp;amp;lt;!-- Messaging script enables widget to send updates to container form --&amp;amp;amp;amp;amp;amp;gt;
    function sendMessage()
    {
        var message = &amp;amp;amp;amp;amp;#39;update.Widget_Data_0.&amp;amp;amp;amp;amp;#39;; + document.get(&amp;amp;amp;amp;amp;#39;ElementId&amp;amp;amp;amp;amp;#39;).value;
        var win = window.top;
        win.postMessage(message, &amp;amp;amp;amp;amp;#39;*&amp;amp;amp;amp;amp;#39;;);
    }

You should set a value in the message variable according to your requirements. Whilst you need not follow the message format used above (action.attribute-name.value), it is good practice to implement all your widgets following a standard pattern. Another good practice (not shown here) would be to pass the name of the bound attribute to the widget on opening it and using that during construction of the message. That way, the widget is better decoupled from the product definition(s) that may require to use it.

Add Message Handling to the Product Model
------------------------------------------------------------
On any attribute in the product model that you wish to use with the widget, create a Rule with an Action of type Execute Javascript and paste the following Javascript:

// Handle messages sent to this product configuration 
function handleMessage(event) 
{ 
	// Parse the message data 
	var message = event.data; 
	var parseMessage = message.split(\&amp;amp;#39;.\&amp;amp;#39;); 
	var action = parseMessage[0]; 
	var target = parseMessage[1]; 
	var value = parseMessage[2]; 

	// Perform message-specific actions 
	if(action==&amp;amp;amp;amp;amp;#39;update&amp;amp;amp;amp;amp;#39;) 
	{ 
		CS.setAttribute(target, value); 
	} 

} 
window.addEventListener(&amp;amp;amp;amp;amp;amp;quot;message&amp;amp;amp;amp;amp;amp;quot;, handleMessage, false);

Note that this single rule / action can provide a listener for the entire product model - you do not need to add multiple handlers for multiple attribute bindings or multiple widgets (assuming they all follow the same message pattern).

Caveat
======
The sample code provided above is a simple implementation provided for illustration and simplicity of use. In production it is a good idea (for security reasons) to pass and check domain information with the message. Where the sendMessage function currently has &amp;amp;amp;amp;amp;amp;quot;*&amp;amp;amp;amp;amp;amp;quot; you can add domain and port data (e.g. https://cscfga.na7.visual.force.com) which ensures that the message will be broadcast only to windows in that domain and / or port. In the handleMessage function it is likewise good practice to check the domain information of the sender before executing any logic.

Compatibility
==========
The addEventListener method is not compatible with Internet Explorer versions 8 or earlier, should the solution be required to support earlier versions of IE, please see attached &#39;IE Compatibility&#39; note for solution.","widget screen embed visualforce screenflow page apex custom screen configurator","true","true","Can I add widgets in a Product Configuration screen and use them to set the value of attributes?","Using Widgets to set Configurator Attribute Values"
"a1m30000000TV95AAG","FAQ-0039","2011-05-22T15:14:41.000Z","Create a rule and add a Javascript action to it that executes the script in the attachment to this FAQ. Comments in the script describe what it is doing in detail.","count related products number of child products how many children rule javascript","true","true","How can I work out a total quantity by adding together quantities defined in related product attributes?","Getting a Total by Summing Quantities in Related Products"
"a1m30000000TZaFAAW","FAQ-0041","2011-07-21T08:33:59.000Z","The attribute price is set in the same way as other attribute 'fields':

CS.setAttributeField('MyAttribute_0', 'price', myPrice);","set price javascript set attribute price","true","true","How do I set the price of an attribute using Javascript?","Setting a Price Using Javascript"
"a1m30000000TvB0AAK","FAQ-0052","2012-03-02T22:06:16.000Z","By escaping them with a backslash \

For example, if I wanted to display the following on the bundle summary screen:

Contract Term - 12 Months

in the line item description field I would type:

Contract Term \- {Contract Term}

Operators that are known to need a backslash are:

minus -
plus +
multiply *
divide /

Please add to this list as you discover other characters that need escaping","operator line item description","false","true","How can I use mathematical operators in line item descriptions?","Mathematical operators in Line Item Descriptions"
"a1m30000000TgoHAAS","FAQ-0043","2011-10-07T09:50:52.000Z","Using jQuery!  We can hide buttons on the page using jQuery in a javascript action until we want the user to be able to select them.

You can find the element that has class = '.btn' and value = 'the text on the button that you want to hide' and then use .hide() and .show() methods to hide or show the buttons as you see fit.

In the example given below, we want to hide the buttons 'Next', 'New Primary Handset Bolt On' and 'New Shared Bolt On' when the user has not submitted their handset tariff details, and show them when they have.

//**************************************************************************** 
//Stop the user from adding bolt ons or progressing to the next screen to 
//configure additional sharers when the tariff selection has not been 
//submitted 
//**************************************************************************** 

if(CS.getAttributeValue('Submit_Handset_Tariff_Details_0') != 'Yes') 
{ 
$j('.btn:contains(\'Next\')').hide() ; 
$j('.btn:contains(\'New Primary Handset Bolt On\')').hide() ; 
$j('.btn:contains(\'New Shared Bolt On\')').hide() ; 
}else{ 
$j('.btn:contains(\'Next\')').show() ; 
$j('.btn:contains(\'New Primary Handset Bolt On\')'). show() ; 
$j('.btn:contains(\'New Shared Bolt On\')').show() ; 
}","jQuery disable attribute related product list read only","false","true","I can disable/render as read only normal attributes and single related products, but when I try to disable/render read only a related product attribute with Max > 1, nothing happens.  How can I do this?","Disabling a related product list"
"a1m30000000TnLbAAK","FAQ-0050","2011-12-14T17:18:56.000Z","No.  There is no automated way to create the product model.

HOWEVER

There is a way to make your life easier :-)

If the product definitions have been defined using the CloudSense template (or something similar) then it is possible to save yourself a lot of time by using data loader.

1) Create all your Product Definitions in the normal way

2) Copy all the attribute definition information into one spreadsheet and save it as a .csv file

3) Create a column called Product Definition in your spreadsheet and populate the product definition ids from Salesforce against the correct attribute definitions

4) use data loader to insert the attribute definition records.

In this way you can build up your product model in salesforce, automating the creation and association of configuration screens, screen sections, select options, object mappings, field mappings, lookup configs and lookup queries.  The ultimate factor in determining how much can be done in this way is the level of detail in the product definitions spreadsheet.","configurator administration create product model data loader","false","false","Is there an automated way to create the product model in Configurator?","Creating your product model"
"a1m30000000TkS0AAK","FAQ-0048","2011-11-21T22:24:47.000Z","Date attribute in configurator holds a string value in format 'dd/mm/yyyy'. This can not be compared with a standard salesforce date field in a query. To be able to check in a lookup query whether date field on the record is equal to the value in your date attribute you can do this:
1. Create a formula field on the record that will cast the date field to string TEXT(API_Field_Name) - this will return a string in format 'yyyy-mm-dd'
2. To change format of the date attribute value create a hidden string attribute and set it's value with a JavaScript action:
var stringDate = (jQuery('#Date_1_0').val().split(""/""));
var sDate = stringDate[2]+'-'+stringDate[1]+'-'+stringDate[0];
jQuery('#Date_2_0').val(sDate);
3. Create a lookup query that evaluates if your formula field on object in question is equal to value of Date 2 attribute.

Keep in mind this approach will not work if you want to determine if date is greater than / less than etc. For this you will need to cast it to integer (both on record and Date 2 attribute) in format yyyymmdd. 

This is only one way to do it, if someone has a better solution please share!

NOTE: Configurator query criteria can compare if a strings is greater than / less than another string (alphabetically speaking). Strings from above are in suitable format to do this, so they can be compared without having to cast them to integers!","Date attribute lookup query filter","false","false","How can I filter the records on a Date selected in the Date attribute?","Comparing Date field with attribute value in a lookup query"
"a1ma0000000UtVrAAK","FAQ-0063","2012-09-14T13:08:58.000Z","Solution:
set your ""Frame Start"" attribute value using a Javascript action, using the location object

Sample code:
//-- Start
var validURL =""<iframe frameborder=\'0\' width=\'100%\' height=\'230\' scrolling=\'auto\' src=\'"" + location.protocol+'//'+location.host.replace('scfga','') + ""/apex/<your VF page name"" ;

CS.setAttribute('FrameStart_0',validURL);
//-- End

Explanation:
location.protocol returns the protocol of the current URL, including the first colon (:) (i.e. http:, https: etc)
location.host Returns the hostname and port of a URL
you also need to replace the cscfga name to c ...

for more details o nthe location object, see http://www.w3schools.com/jsref/obj_location.asp","Dynamic widget URL","false","false","How do I set a dynamic URL reference, for an embedded VF page iframe using configurator??

Problem:
Currently we recommend setting your embedded VF page's iframe using a preset URL saved in an attribute.
However the URL is env specific (e.g. https://c.cs2.visual.force.com/apex/<your VF page> ) and therefore requires manual changes when delivering to test environments and production","How do I set a dynamic URL reference, for an embedded VF page iframe using configurator?"
"a1m30000000TqWzAAK","FAQ-0051","2012-01-09T09:09:14.000Z","Yes

By passing the id of the Order record type into the RecordTypeId field.

The principle is as follows:

Create a hidden User Input Attribute Definition that holds the RecordTypeId (this value can be set by rules if need be).  In the Output Mapping Field for this Attribute Definition type 'RecordTypeId'.  This will create the desired record type when the Orders are created (usually when the Opportunity Stage is set to 'Closed Won').

However, the id will change from Sandbox to Sandbox.  A way around this is as follows.  Instead of typing the id of the record type in your hidden attribute, use the record type name.  Then have a trigger on insert Order that maps this name to the correct RecordTypeId and the correct record type will be chosen.

When the code for the trigger is finished I will add it as an attachment to this FAQ.","Order Record Types Configurator Output Mapping","false","false","Can we set the record type of an Order based on a product configuration?","Creating different Order record types based on product configuration"
"a1m30000000UNUNAA4","FAQ-0059","2012-07-04T12:53:22.000Z","Master - Generic Action Layout
Add Attribute to Line items - Generic Action Layout
Constrain List Values - Constrain List Values Layout
Disable Attribute - Generic Action Layout
Display Info Message - Configuration Level Action Layout
Execute Javascript - Execute Javascript Layout
Make Attribute Mandatory - Generic Action Layout
Make Attribute Optional - Generic Action layout
Make Attribute Read Only - Generic Action Layout
Mark COnfiguration Invalid - Configuration level Action Layout
Remove Attribute from Line Items - Generic Action Layout
Require Data Refresh - Configuration Level Action layout
Set Billing Frequency - Configuration Level Action layout
Set Configuration Name - Configuration Level Action layout
Set Contract Term - Configuration Level Action layout
Set Contract Term Period - Configuration Level Action layout
Set Line Item Sequence - Generic Set Action Layout
Set Price - Generic Set Action Layout
Set Recurrence Frequency - Generic Set Action Layout
Set Value - Generic Set Action Layout
Set Value of Attribute Field - Set Value of Attribute Field Layout

These should be set every time the configurator is installed in an org for the first time.","Configurator Action Record Type Page Layout Assignments","false","false","What are the correct page layout assignments for each Action record type?","Configurator Action Record Type Page Layout Assignments"
"a1m30000000Ty04AAC","FAQ-0054","2012-02-29T16:48:26.000Z","There is no set limit on the number of actions that can be added to a rule.  However there is a limit on the size of the Description field on the rules (1024 characters).  This means that when the size of the rule description field gets near the limit, you will not be able to add any more actions and will have to create a new rule.

This may prove useful when you are consolidating rules i.e. putting actions attached to rules with the same predicates on the same rule (usually rules with no predicates) for performance improvements within the configurator page.","rule action limit","false","false","Is there a limit to the number of actions that can be added to a rule?","Limit on the number of actions associated to a rule"
"a1m30000000U8uJAAS","FAQ-0056","2012-04-11T16:39:41.000Z","Yes.

1. Create an attribute of type Text Display
2. Set the default value of the attribute to your required HTML and script

For example, the following works (when set as the default value for a Text Display attribute):

<script>
    function testJSControl()
    {
        alert(""testJSControl"");
    }
</script>
<input type=""button"" value=""Test"" onclick=""testJSControl();""></input>

You can use this technique to invoke CS Javascript API methods (e.g. setAttribute, getAttributeValue) from your custom controls. This approach can simplify product models by reducing the need for rules and allowing logic to be executed from a user initiated control event instead of monitoring attribute values.","javascript control attribute button api cs","true","true","Can I add controls that call arbitrary Javascript functions to a Configurator screen?","Javascript Controls"
"a1m30000000TXhnAAG","FAQ-0040","2011-06-28T08:08:15.000Z","There is a new boolean field on Lookup Criteria called 'Value is Attribute Reference' that must be added to the page layout on lookup criterion and checked for all those criteria that reference attribute values.  

If you have several that need to be updated, create a list view of lookup criteria and enable 'Enhanced list views'.  The field can be updated from the list view.

If you have lots, then you could execute the script that is in the note at the bottom of the page.","configurator lookup query criteria criterion not working value is attribute reference expression no value help","true","true","My previously functioning Lookup Queries are not working now that I have installed the Spring 11 package.  What could the problem be?","Lookup Queries/Criteria in Spring 11 package"
"a1m30000000UA0zAAG","FAQ-0057","2012-05-19T16:14:23.000Z","Yes

If you create a Rule which always executes the following Javascript action (i.e. a rule with no predicate) the Javascript will insert itself into the configurator page the first time the rule runs and start monitoring any fields you tell it to track for changes.  When such a field changes, a cascasing delete of all the ""child"" attributes you have dictated will take place.  You can create any hierarchy of attributes you like for the attributes but avoid circular references unless you add a check for that in the recursion.

Paste the whole script below into your new Action but edit the section under the comment ""USE YOUR ATTRIBUTES HERE"" to apply the cascading field deletes you need.  I've left in some example fields so you can see how it's been used.


CS.log(""\n\n*** Track Changes Log ***\n\n"");
//First section is generic code suitable for framework usage.

//Only insert the new objects and functions for this feature once when the rule first fires: 
if (!top.trackedflag == 1)  
  {
  top.trackedflag = 1;
  CS.log(""Adding TrackedFields"");

  //To see how often the rule has fired
  top.ruleIterations = 0;

  //TrackedFields contains all the data and functions - insert it into the document
  top.TrackedFields = new Object();
  //Top level count of all tracked fields, regardless of whether they have dependencies
  top.TrackedFields.fields = 0;

  //Create function to add new tracked fields...
  top.TrackedFields.addTrackedField = function(name)
    {
    CS.log(""Adding Tracked field: "" + name);    
    this[this.fields] = new Object();
    //Record field name, current value and collection of dependent fields for each field we track
    this[this.fields].name = name;
    this[this.fields].value = CS.getAttributeValue(name, ""String"");
    this[this.fields].DependentFields = new Object();
    this[this.fields].DependentFields.fields = 0;
    this.fields++;
    CS.log(""Now tracking "" + this.fields + "" field(s)."");
    return name;};

  //Function to return the index of a tracked field by name
  top.TrackedFields.findField = function(fieldName)
    {
    for (var i = 0; i < this.fields; i++)
      {
      if (this[i].name == fieldName)
        {
        CS.log(""Found field "" + fieldName + "" at "" + i);
        return i;
        }
      }
      CS.log(""Error did not find tracked field "" + fieldName);
      return -1;
    };


  //Function to declare that a tracked field resets another tracked field when it changes
  top.TrackedFields.setDependency = function(parentField, childField)
    {
    CS.log(""set Dependency: "" + parentField + "" drives: "" + childField);
    var theParent = this[this.findField(parentField)];
    var theChild = this[this.findField(childField)];
    theParent.DependentFields[theParent.DependentFields.fields] = theChild;
    theParent.DependentFields.fields++;
    CS.log(theParent);
    CS.log(theChild);
    };

  //Recursive Function to erase dependent fields of a tracked field
  top.TrackedFields.erase = function(fieldToErase)
    {
    CS.log(""Requested erase of field "" + fieldToErase.name);
    for (var i = 0; i < fieldToErase.DependentFields.fields; i++)
      {
      this.erase(fieldToErase.DependentFields[i]);
      }
      CS.log(""Erasing Field "" + fieldToErase.name);
      CS.setAttribute(fieldToErase.name, """");
      fieldToErase.value = """";
    };

  //Function to check for changes on tracked fields and trigger erase of dependent fields if so
  top.TrackedFields.process = function()
    {
    //loop over tracked fields; if one has changed reset all its dependent fields
    //Because rules fire for each CS field change, we can stop when we have found one changed field
    var stopped = false;
    for (var i = 0; i < this.fields && stopped == false; i++)
      {
      CS.log(""Tracking changes..."" + i + "" = "" + CS.getAttributeValue(this[i].name, ""String"") + "":"" + this[i].value);
      if (this[i].value != CS.getAttributeValue(this[i].name, ""String""))
        {
        CS.log(""Tracked Field has changed => Cascading delete from "" + this[i].name);
        //Loop over the dependent fields of this object and erase their values
        if (this[i].DependentFields.fields > 0)
          {
          for (var k = 0; k < this[i].DependentFields.fields; k++)
            {
            //Recurse into this field's dependent fields...
            this.erase(this[i].DependentFields[k]);
            }
          }
        //Now complete by saving the value the changing field which triggered the cascading delete now has 
        this[i].value = CS.getAttributeValue(this[i].name, ""String"");
        stopped = true;
        }
      }
    };

  }
else
  {
  CS.log(""TrackedFields found OK"");
  }


//Set up the tracked fields if they have not been configured yet:
if(top.TrackedFields.fields < 1)
{
  //Here we actually set the tracked fields and their dependency chain for this particular model - example from Colt.

  //This is the start of code specific to the model... USE YOUR ATTRIBUTES HERE

  top.TrackedFields.addTrackedField(""Service_0"");
  top.TrackedFields.addTrackedField(""Country_A_end_0"");
  top.TrackedFields.addTrackedField(""PoP_City_A_end_0_Name"");
  top.TrackedFields.addTrackedField(""Country_B_end_0"");
  top.TrackedFields.addTrackedField(""PoP_City_B_end_0_Name"");
  top.TrackedFields.addTrackedField(""Zone_0_Name"");

  top.TrackedFields.setDependency(""Service_0"", ""Country_A_end_0"");
  top.TrackedFields.setDependency(""Country_A_end_0"", ""PoP_City_A_end_0_Name"");
  top.TrackedFields.setDependency(""PoP_City_A_end_0_Name"",""Country_B_end_0"");
  top.TrackedFields.setDependency(""Country_B_end_0"",""PoP_City_B_end_0_Name"");
  top.TrackedFields.setDependency(""PoP_City_B_end_0_Name"", ""Zone_0_Name"");


  top.TrackedFields.addTrackedField(""PricingMatrixKey_0"");
  top.TrackedFields.addTrackedField(""Speed_0"");
  top.TrackedFields.addTrackedField(""ContractTermYears_0"");
  top.TrackedFields.setDependency(""Zone_0_Name"", ""PricingMatrixKey_0"");
  top.TrackedFields.setDependency(""Speed_0"", ""PricingMatrixKey_0"");
  top.TrackedFields.setDependency(""ContractTermYears_0"", ""PricingMatrixKey_0"");



  //To make sure OLO costs wiped properly forcing data entry
  top.TrackedFields.addTrackedField(""OLO_Cost_Type_0"");
  top.TrackedFields.addTrackedField(""OLO_Cost_A_End_Install_0"");
  top.TrackedFields.addTrackedField(""OLO_Cost_B_End_Install_0"");
  top.TrackedFields.addTrackedField(""OLO_Cost_A_End_MRC_0"");
  top.TrackedFields.addTrackedField(""OLO_Cost_B_End_MRC_0"");
  top.TrackedFields.addTrackedField(""Access_Method_A_end_0"");
  top.TrackedFields.addTrackedField(""Access_Method_B_end_0"");

  //Reset both OLO field pairs when the OLO Type is selected
  top.TrackedFields.setDependency(""OLO_Cost_Type_0"", ""OLO_Cost_A_End_Install_0"");
  top.TrackedFields.setDependency(""OLO_Cost_Type_0"", ""OLO_Cost_B_End_Install_0"");
  top.TrackedFields.setDependency(""OLO_Cost_Type_0"", ""OLO_Cost_A_End_MRC_0"");
  top.TrackedFields.setDependency(""OLO_Cost_Type_0"", ""OLO_Cost_B_End_MRC_0"");
  //Reset the A or B end when the driving access type changes
  top.TrackedFields.setDependency(""Access_Method_A_end_0"", ""OLO_Cost_A_End_Install_0"");
  top.TrackedFields.setDependency(""Access_Method_A_end_0"", ""OLO_Cost_A_End_MRC_0"");
  top.TrackedFields.setDependency(""Access_Method_B_end_0"", ""OLO_Cost_B_End_Install_0"");    
  top.TrackedFields.setDependency(""Access_Method_B_end_0"", ""OLO_Cost_B_End_MRC_0"");
}


//loop over tracked fields; if one has changed reset all its dependent fields
top.TrackedFields.process();

CS.log(""All Done"");","Cascading Attribute Delete Javascript","true","true","Can I wipe the values of attributes when other attributes are changed?","Cascading Configurator Attribute Delete"
"a1m30000000TxXkAAK","FAQ-0053","2012-02-24T09:17:05.000Z","Yes.  The attached file shows the methods that can be used.  In general, use 

CS.function('attName','value')","Configurator Javascript api list of methods","false","false","Is there a list of configurator javascript API methods?","Configurator Javascript API methods"
"a1m30000000Tj7yAAC","FAQ-0046","2011-11-03T09:16:41.000Z","Allthough Set Attribute Value action is working normally it appears not to be working from the user point of view because of a minor display bug in Configurator. The value will be reset but the on-screen name is not cleared. You can resolve this by additionaly adding a JavaScript action that will clear the name to the rule.

Example of JavaScript action for lookup attribute called ""Example Attribute"" would be:
jQuery(CS.getId('Example_Attribute_0')+'_Name').val('');","jQuery set lookup attribute","true","true","How can I set a lookup attribute value to empty value?","Setting a lookup attribute value to empty value"
"a1m30000000TS8aAAG","FAQ-0030","2011-04-05T15:12:03.000Z","Sharing model may be set to private.

The profile needs at least Read Only access on the Product Configurator objects, Product Definitions, Attribute Definitions, Rules, Predicates, Actions etc...","product configurator security sharing model profile access","false","false","I can try to create a Product Configuration from the ProductBundleBuilder screen, but nothing happens and I do not get an error message. What is happening?","Cannot create Product Configurations with certain profiles"
"a1m30000000Tib7AAC","FAQ-0045","2011-10-27T09:50:48.000Z","For version management, CloudSense R&D uses the tool that was developed by Linus Torvalds, the creator of the Linux operating system, called GIT.

On projects CloudSense may use SCCS and related tools at the direction of the customer but the default for CloudSense developed assets is the widely adopted Subversion (SVN).","sccs source code control version control source control","true","true","What Does CloudSense use For Source Code Control / Version Management?","CloudSense Version Management and Source Control"
"a1m30000000TQI1AAO","FAQ-0029","2011-05-10T08:40:10.000Z","Create an attribute of type 'Text Display' or 'Calculation' and supply a value to it (default or by rule) that defines an iFrame and its contents - for example:

<iframe src=""https://na1.salesforce.com/apex/flatplan"" width=""100%"" height=""1400"" frameborder=""0""></iframe>

...will display a custom VF screen called FlatPlan wherever the attribute is displayed. Note:

- Use of width and height to determine amount of real estate assigned to the screen
- Use of end tag (</iFrame>) is mandatory, using a single tag with a terminator (<iFrame/>) causes problems for the containing page.
- Set the attribute Column Span property to '2' in order to make the screen stretch across the whole containing screen (unless you want it in a single column)

This will work with non-Salesforce pages as well - for example, you can display a credit checking agency's website to allow the user to real-time credit check a customer. The attached screenshot shows an example using Google.

For information on how to dynamically reload the screen (widget) as values within the general product configuration change please refer to FAQ-0035 (https://na1.salesforce.com/a1m30000000TUX6).

For information on the differences and relative merits of using either Calculation or Text Display fields to host a widget see FAQ-0036 (https://na1.salesforce.com/a1m30000000TUat).","screen embed visualforce screenflow page apex custom screen configurator","true","true","How can I display custom or standard screens as part of a Configurator product configuration?","Displaying Non-Configurator Screens In Configurator"
"a1m30000000TO30AAG","FAQ-0028","2011-03-03T08:30:46.000Z","yes :-)","test","false","false","Is it working?","Testing the new trigger for links"
"a1m30000000TNzSAAW","FAQ-0027","2011-03-01T17:17:27.000Z","It is possible to set the Max value on the Related Product detail page to 1 - in that case it can appear on any chosen screen section, but then only one related product can be added to this configuration. 
Otherwise, a separated screen section for related products will automatically be created on the bottom of the screen, even if you set it to appear in some other section.","Related product, section","true","true","When creating a Related product, a separate screen section is formed on the bottom of the configuration screen where this attribute appears. Is it possible to make this attribute appear on some other screen section?","Related Product attribute forms a separate screen section on the bottom of the screen"
"a1m30000000TNycAAG","FAQ-0007","2011-02-25T16:39:51.000Z","The Submit for Approval button may appear in several forms used by CloudSense Configurator. Where this is the case, it is just a standard Salesforce form that has not been removed from the page layout. Removing it from the page layout on a global or individual basis will cause no harm to the Configurator.","approval button page layout standard","true","true","What is the Submit for Approval button for?","Submit for Approval in CloudSense Screens"
"a1m30000000TNydAAG","FAQ-0008","2011-02-25T16:39:51.000Z","The bundle in the old opportunity will continue to use the product version that was current when it was created.","bundle version old new opportunity opportunities product import export","true","true","If I import a new version of a product but I have already got opportunities that are using a previous version, what is the behavior when I try to edit the bundle in that old opportunity?","What Happens to Bundles that Have Old Product Versions?"
"a1m30000000TNyeAAG","FAQ-0009","2011-02-25T16:39:51.000Z","All of these settings control whether or not a product is visible to the end user at order capture time. There are individual answers for what these do but here we will summarise them together.","","true","true","What is the difference between Active, Browsable and Date Range?","Active and Browsable Products and Date Ranges"
"a1m30000000TNyfAAG","FAQ-0010","2011-02-25T16:39:51.000Z","Unless the error has been explicitly anticipated and otherwise handled then the user will see a VisualForce page error (assuming the error is manifest at that point of time, not downstream) of the standard kind with some information regarding the nature of the error. In order to avoid such possibilities in production, the best practice for introducing new or modified product models is to implement and test them in suitable pre-production environments prior to final release to production.

The extent and completeness of test requirements will depend upon the nature of changes made, what if any downstream systems / modules are integrated, other customisations in affect and so on. For some simple model changes in relatively un-customised environments it may be acceptable to make changes directly in production. At the other end of the scale a series of tests may be required starting with unit test in dev, through to next box / integration tests and finally to production.
Â ","salesforce validation error exception visualforce apex test","true","true","If there is a validation error at the point where opportunity line items are generated by the CloudSense Configurator (for example, the model does not pass some data which has been made required elsewhere in the general Salesforce processes) what does the user see on the screen?","Testing New Models For Downstream Impact"
"a1m30000000TNygAAG","FAQ-0011","2011-02-25T16:39:51.000Z","Unfortunately there are currently constraints imposed by Visualforce which does not fully expose the Salesforce lookup search and filter capabilities through the programmatic means. This restricts the depth of filtering that can be done using the normal mechanisms.","visual force limitation not filtered search dialog lookup no pre-filter","false","true","Some of the lookups in Configurator are unwieldy to use because they do not pre-filter rows in an expected fashion.","Unfiltered Lookups"
"a1m30000000TNyhAAG","FAQ-0012","2011-03-01T10:17:50.000Z","Product modifications are typically made in a development sandbox and tested there. Once approved for release, modified products are exported to an XML file. This file is imported into the production environment. During the import process the user can select whether the imported products should be treated as new products in their own right or new versions of an existing product. If the latter then the previous versions are archived and users will now see the new version at order capture time.","version control xml import export release sandbox production archive","true","true","How are products version controlled?","How are products version controlled?"
"a1m30000000TNyiAAG","FAQ-0013","2011-02-27T09:43:16.000Z","Any SObject can be specified (by its API name) as the to object. The field mappings added to the object map are then used to map from the fields in the from object side to fields in the to object side. This mapping can be invoked through a simple API exposed by CloudSense via Apex and could be used, for example, to expedite integration between multiple Force.com-based applications.","sobject api apex visualforce from object field mapping","true","true","When creating an Object Mapping what (other than map) can be provided as the value of the to object?","Object Mapping  - To Object Field"
"a1m30000000TNyjAAG","FAQ-0014","2011-02-25T16:39:51.000Z","All of these settings control whether or not a product is visible to the end user at order capture time. There are individual answers for what these do but here we will summarise them together, noting the differences.

A product that is NOT marked as active will not be visible to anyone trying to create a new product bundle. It will still be visible in product bundles that were created when the product WAS active.

A product that is marked as active but which has a date range specified will only be visible to users creating a new product bundle between the specified start and end dates, thereafter it will behave as inactive. It will still be visible in product bundles that were created inside the date range.

A product that is marked as active (and is within any date range specified) but which is NOT marked as browsable cannot function as a top level product. The product will still be visible and usable within any products where it functions as a related product. If a previously browsable product is made non-browsable then the same principles apply as for active and date range.","active browsable date range inactive non-browsable expired visible bundle","true","true","What is the difference between Active, Browsable and Date Range?","Active and Browsable Products and Date Ranges"
"a1m30000000TNykAAG","FAQ-0015","2011-02-25T16:39:51.000Z","Once a product is outside a date range it can no longer be selected as part of a new bundle. If there is an existing bundle that already uses the product, it will remain visible and editable within that bundle.","product bundle date range existing bundle visible editable","true","true","If a bundle has been configured using a product that has a date range applied to it, what is the behavior if we edit the bundle after the date range has expired?","Effect of Date Range on Products"
"a1m30000000TNylAAG","FAQ-0016","2011-02-27T09:26:45.000Z","If a product is marked as browsable it means it can be seen (assuming it is active and within any date range constraints) in the product browsing screens when the user chooses to configure a new product bundle. If a product is not browsable, it can still be ordered but only as an option inside a containing product. In effect, Browsable determines whether a product can be a top level or standalone product or not.","marked as browsable active date range not browsable top level standalone","true","true","What does the Browsable setting on product defintions do?","Browsable and Non-Browsable Products"
"a1m30000000TNymAAG","FAQ-0017","2011-02-28T17:43:53.000Z","For mandatory and disablement of attributes this is not necessary. When the rules are evaluated the default state of the attribute is automatically reapplied if the rule is not satisfied. Select lists constraint rules work the same way (unless a rule explicitly constrains the list, it will display its default values without needing to make a rule to force that).

For some other actions (e.g. setting data in a user input based on a rule) this does not automatically reset and would require an explicit rule to do so (which is correct behavior because data is not simply an on/ off but may change through various states over time).

NB It is also important to differentiate between properties. For example, when an attribute is made required as per one rule and is then disabled according to another (or the disable attribute action is part of the 'Otherwise' condition, it is necessary to explicitly make the attribute optional as well as disable it (in order to remove the required property). A 'correct' rule is shown below.

When {Broadband:Care Package} equals 'Level 3' -> Make Attribute Mandatory {Broadband:Number of Sites}. Otherwise: Make Attribute Optional {Broadband:Number of Sites}; Disable Attribute {Broadband:Number of Sites}.","rule mandatory optional constraint setvalue setprice automatic handle default","true","true","It is possible to create rules that do things like making an attribute mandatory. If we do so, do we also have to create rules to handle the default case (e.g. set an attribute back to being optional)?","Explicit and Implicit Rule Effects"
"a1m30000000TNynAAG","FAQ-0018","2011-02-27T09:44:15.000Z","'Map instructs the mapping to copy fields (as per the mapping configuration) to an Apex map object. The Lookup controls in a CloudSense Configurator screen are aware of this built-in, generated map and can use it to automatically transfer data from the looked up object to the control. Nevertheless, the capability is a generic one and could be exploited by other Visualforce pages to perform custom lookups.","apex map object mapping visualforce","true","true","When creating an Object Mapping what does it mean when the to object is map","Lookup Config To Object As Map"
"a1m30000000TNyXAAW","FAQ-0002","2011-02-25T16:39:51.000Z","With an attribute of type = 'Lookup' (i.e. where the user will see a lookup button at runtime) this is not currently possible. You can specify literal criteria values for the query fields but not the names of attributes.

For attributes of type = 'Calculation', that use the $Lookup context to retrieve data, however, it IS possible to specify attributes as query parameters such that the value of these attributes is used to filter the query results at runtime.","query calculated lookup config object mapping lookup query criteria criterion parameter dynamic","false","true","Can I configure a lookup config to use parameters passed from attributes at run-time as filter fields on the lookup dialog?","Filter Lookup By Attribute Value"
"a1m30000000TNyYAAW","FAQ-0003","2011-02-27T09:24:08.000Z","If enhanced lookup is checked, each of the list fields of the lookup will be displayed at runtime at the top of the lookup dialog (i.e. above the main list grid). The user can enter data into these fields to filter the results displayed in the dialog. This augments the standard search box filtering by providing a more targeted (by field) capability.","checked option list fields filter results dialog search lookup configuration","true","true","What is the 'enhanced lookup' option on a lookup configuration?","Enhanced Lookups"
"a1m30000000TNyZAAW","FAQ-0004","2011-02-27T09:29:53.000Z","CloudSense Configurator provides the capability to configure screens that can participate in a flow (wizard-like) - these are created using the Auto-Generated Screens section of the Product definition. In addition to this, users may have noticed a section called Screen Flow.

This Screen Flow section is a part of an infrastructure built by CloudSense to deal with flows of custom VisualForce screens that require to interact with the Configurator product logic. Whilst this infrastructure exists, it is intended for use with very non-standard scenarios that require additional implementation. It is not a tool that CloudSense customers in general should expect to use.","auto generated screen flow visualforce","false","false","What is the purpose of the Screen Flow section on the product definition screen?","Screen Flow Section"
"a1m30000000TNyaAAG","FAQ-0005","2011-04-28T05:55:31.000Z","The out of the box default is no. in CloudSense we usually create separate line items for different kinds of charges and this is often a better approach. If a single line item is required this can be achieved with some implementation effort.

Cloudsense has several implementations where custom line item triggers have been required for this and similar requirements. See attachments to this FAQ for an example.","recurring charges opportunity line item non-recurrring charges nrc mrc one time charge otc out of the box oob","true","true","Can we have recurring and non-recurring charges on the same opportunity line item?","Recurring and Non Recurring Charges on the Same Line Item"
"a1m30000000TNybAAG","FAQ-0006","2011-02-25T16:39:51.000Z","In the current release, the answer is no. CloudSense are, however, aware that tighter controls over modeling features would be valuable and are designing and introducing such. In the Spring 11 release (for example) there will be orphan checking for rules â€“ i.e. when a rule is deleted the system will check for orphaned predicates and actions and advise the user accordingly.","spring 11 release orphan check rules predicate action","false","false","Are there controls to prevent a user from deleting attributes that are used by predicates and / or actions?","Model Integrity Controls"
"a1m30000000TNzDAAW","FAQ-0024","2011-03-01T09:19:03.000Z","Here is a checklist of things to do if a Lookup Query is not behaving as expected.

1. Check that the ""Object"" field on the Lookup Config is populated with the correct API name of the object you are looking to.

2. The ""Lookup Query"" field on the Attribute Definition is populated with the correct Lookup Query.

3. In the formula you are using, make sure that the Lookup Query name is spelt correctly and it is of the form:

{$Lookup(Lookup_Query_Name):API_Name_of_Field_on_Object__c}

4. Perform checks that the action (if you have the formula in a set value rule) is attached to rule, the rule is active and that the ""Value is Expression"" box is ticked on the Action Detail page.

5. Ensure that any attribute references you use in the ""Value"" field of a Lookup Criterion are spelt correctly.

6. Ensure any logic you are using on the Lookup Criteria is correct.

7. The data types of the Attribute Definition and the field on the object must match. For example, if a field on the object is of type ""Number"", then the value will not be returned if the Attribute Definition is of type ""String"".","Lookup Query SetValue Set Value Criteria Checklist Troubleshoot","true","true","A Lookup Query is not behaving as expected, either not returning a value from the object or returning the wrong value. What should I do to correct it?","Lookup Query Not Behaving As Expected - Checklist"
"a1ma0000000USW3AAO","FAQ-0061","2012-08-02T10:11:11.000Z","With a marvellous new feature of Orchestrator, yes you can and you won't use up lots of schedule slots either.

Not to be confused with parallel developments in smart Scheduling, there is a public API exposed in Orchestrator 1.48 and above which supports this.

Your code runs then the activity is rescheduled to next run after a set interval which you determine.  Each time the job runs, it reschedules itself again until your code decides to stop the recurrence, it's deleted from the schedule manually or if it hits an unhandled exception.  Say goodbye to having to use 6 x scheduled jobs at 10 minute intervals commonly used when scheduling Orchestrator, for example.  It can be used like the Process Runner page but without having to leave that running in some form in a browser.

Here's how to do it.  First, create a class which implements cspofa.RepeatingJob.JobSpec (there's a template at the end of this FAQ for you).

The method execute(SchedulableContext) should contain the code which will be run each time the job is run.

The getInterval() method should return the number of seconds between job runs.  Up to you to make this configurable as required.  I've tested down to 60 seconds in load tests; practical limits depend on what else is running concurrently in your org.

getName() must return a String to be used as the name of the task in the All Scheduled Jobs page & getType() should return your class type for introspection by the core package code.

To inject your repeating job into the scheduler use a line of code like this:

cspofa.RepeatingJob(your class implementing cspofa.RepeatingJob.JobSpec).execute(null);

Here null used instead of an instance of SchedulableContext.  Alex says that in a subsequent release we will expose a method to schedule the job without executing.

Because the jobs self-schedule on completion of the code in the execute() method, bear in mind that if a 1 minutely repeating task takes over a minute to run, the next iteration will be scheduled to run 1 minute after it completes.  Note also that if your execute() method crashes or is culled because too many other long running queries are already in process, your job will not be rescheduled/repeated - worth bearing in mind for production use and monitoring.

Template code for a JobSpec implementation:

public with sharing class MyRepeatingJobSpec implements cspofa.RepeatingJob.JobSpec {
		
	public Type getType() {
		return MyRepeatingJobSpec.class;
	}
	
	public Integer getInterval() {
		return 60; // time in seconds after previous job finishes that the next will start. Workable minimum is 60 secs / 1 min.  You could vary the interval to tune your system by adding logic here
	}
	
	public String getName() {
		return 'My Job Name'; // Name unique to this job, will show up in Apex Scheduled Jobs list
	}
	
	public Boolean execute(SchedulableContext sc) {
	    // Do some work here
	    return true; // return true to repeat the job, false will stop repeating - neat feature I think
	}

}","Repeating RepeatingJob Jobspec schedule frequency self-scheduling repeating Orchestrator process","false","false","Can I get an Apex method to run repeatedly at any arbitrary interval (e.g. every 2 minutes after completion) using only 1 Scheduled Job slot?","RepeatingJob: Repeats Apex Jobs at any time interval"
"a1m30000000Ti7LAAS","FAQ-0044","2011-10-20T17:55:31.000Z","See the attached document that discusses the subject in some detail. Note that this is the original document, updated to reflect new CloudSense style and now published here to consolidate with the rest of the knowledge base.","price discount matrix pricing rules","true","true","What options are there for pricing in Configurator and when should I use  which approaches?","Configurator Pricing Mechanisms"
"a1ma0000000US9QAAW","FAQ-0060","2012-07-31T08:31:12.000Z","Setup a rule with a javascript action as follows:
---------------------------------------------------------------
The following example sets the lang variable from the language on the opportunity record. The labels are then updated depending on whether this value is English, Spanish or French.
---------------------------------------------------------------

var lang = ''; 
var english = ''; 
var spanish = ''; 
var french = ''; 

lang = CS.getAttributeValue(""Language_0""); 

english = CS.getAttributeValue(""English_Product_0""); 
french = CS.getAttributeValue(""French_Product_0""); 
spanish = CS.getAttributeValue(""Spanish_Product_0""); 

var labelTranslations = { 
english: { 
'Language_0': 'Language (English/Spanish/French)', 
'French_Product_0': 'French Product', 
'Spanish_Product_0': 'Spanish Product', 
'English_Product_0': 'English Product', 
'Product_0': 'Product', 
'Price_0': 'Price', 
'Description_0': 'Description' 
}, 

french: { 
'Language_0': 'Langage (Anglais/Espanol/Français)', 
'French_Product_0': 'Produit Français', 
'Spanish_Product_0': 'Produit Espagnol', 
'English_Product_0': 'Produit Anglais', 
'Product_0': 'Code de Produit', 
'Price_0': 'Prix', 
'Description_0': 'Description' 
}, 

spanish: { 
'Language_0': 'Lenguaje (Inglés/Español/Francés)', 
'French_Product_0': 'Producto Francés', 
'Spanish_Product_0': 'Producto Español', 
'English_Product_0': 'Producto Inglés', 
'Product_0': 'Código del Producto', 
'Price_0': 'Precio', 
'Description_0': 'Descripción' 
} 
} 

var labels = labelTranslations[lang.toLowerCase()]; 
if (labels) { 
for (att in labels) { 
jQuery('label[for=""' + att + '_wrapper""]').text(labels[att]); 
} 
}","Change Attribute Labels During Product Configuration","true","true","Can I change the attribute labels in the product configuration screen depending on the language of the user, account, etc.?","Change Attribute Labels During Product Configuration"
"a1ma0000000UU20AAG","FAQ-0062","2012-08-20T08:46:01.000Z","Setup a workflow rule as follows:

If Attribute:Name = ""Discount"" and Attribute:Value > 50 then set Opportunity: Approval Status to ""Director Approval Required""","Update Opportunity Status based on Product Configuration","false","false","How do I update the opportunity status based on the value of one or more attributes in the product configuration, e.g. set opportunity status to Director Approval Required if discount on configuration is greater than 50%","Update Opportunity Status based on Product Configuration Attributes"
